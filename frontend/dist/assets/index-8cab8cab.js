import{a as _e,o as be,b as s,D as ge,c as A,e as ve,g as e,w as l,f as d,m as V,F as we,P,Q as ye,J as Ve,K as he,L as Ce,I as Te,j as r,t as f,M as xe,R as Ne,S as ke,N as Ue,i as q,h,E as T,C as ze}from"./index-285e75c9.js";const Me={class:"customer-management"},Fe={class:"card-header"},Ee={class:"header-buttons"},Se={class:"pagination"},Re={class:"dialog-footer"},$e={class:"dialog-footer"},Be={__name:"index",setup(qe){const b=q({customerName:"",contactName:"",phone:"",customerType:""}),w=q({current:1,size:10,total:0}),U=h(!1),D=h([]),z={0:{label:"潜在客户",type:"info",effect:"dark"},1:{label:"意向客户",type:"warning",effect:"dark"},2:{label:"合作客户",type:"success",effect:"dark"},3:{label:"流失客户",type:"danger",effect:"dark"}},J={0:"电话",1:"微信",2:"面谈",3:"邮件",4:"其他"},x=h(!1),F=h(!1),k=h(!1),M=h("add"),E=h(null),o=q({id:"",customerName:"",customerType:"0",contactName:"",phone:"",email:"",address:"",industry:"",source:"",description:"",status:"1"}),c=h({}),j=h([]),I=h([]),K={customerName:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"客户名称长度在 2 到 50 个字符",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"},{min:2,max:20,message:"联系人长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],customerType:[{required:!0,message:"请选择客户分类",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},C=async()=>{U.value=!0;try{setTimeout(()=>{D.value=[{id:1,customerName:"阿里巴巴集团",contactName:"张三",phone:"13800138000",email:"zhangsan@alibaba.com",customerType:"2",status:"1",createTime:"2023-01-01 10:00:00"},{id:2,customerName:"腾讯科技",contactName:"李四",phone:"13900139000",email:"lisi@tencent.com",customerType:"1",status:"1",createTime:"2023-01-02 10:00:00"},{id:3,customerName:"百度在线",contactName:"王五",phone:"13700137000",email:"wangwu@baidu.com",customerType:"0",status:"1",createTime:"2023-01-03 10:00:00"},{id:4,customerName:"字节跳动",contactName:"赵六",phone:"13600136000",email:"zhaoliu@bytedance.com",customerType:"3",status:"0",createTime:"2023-01-04 10:00:00"}],w.total=4,U.value=!1},500)}catch(u){console.error("获取客户列表失败:",u),T.error("获取客户列表失败"),U.value=!1}},Q=()=>{w.current=1,C()},G=()=>{Object.keys(b).forEach(u=>{b[u]=""}),w.current=1,C()},H=u=>{w.size=u,C()},W=u=>{w.current=u,C()},X=()=>{M.value="add",Object.keys(o).forEach(u=>{o[u]=""}),o.customerType="0",o.status="1",x.value=!0},Y=u=>{M.value="edit",Object.assign(o,u),x.value=!0},Z=async()=>{if(E.value)try{await E.value.validate(),setTimeout(()=>{x.value=!1,T.success(M.value==="add"?"新增客户成功":"编辑客户成功"),C()},500)}catch(u){console.error("表单验证失败:",u)}},ee=u=>{c.value=u,j.value=[{id:1,name:"张三",phone:"13800138000",email:"zhangsan@alibaba.com",position:"技术总监",priority:"1"},{id:2,name:"李四",phone:"13900139000",email:"lisi@alibaba.com",position:"产品经理",priority:"0"}],I.value=[{id:1,followContent:"初次接触，了解需求",followMethod:"0",followTime:"2023-01-01 10:00:00",nextFollowTime:"2023-01-08 10:00:00",followUser:"管理员"},{id:2,followContent:"详细沟通项目细节",followMethod:"2",followTime:"2023-01-08 10:00:00",nextFollowTime:"2023-01-15 10:00:00",followUser:"管理员"}],F.value=!0},le=(u,t,_)=>{console.log("行点击事件:",u,t,_)},te=u=>{setTimeout(()=>{T.success("状态更新成功")},500)},ae=u=>{T.info("添加跟进记录功能开发中")},oe=u=>{ze.confirm("确定要删除该客户吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{setTimeout(()=>{T.success("删除客户成功"),C()},500)}).catch(()=>{})},ue=()=>{k.value=!0},ne=(u,t)=>{console.log("文件变更:",u,t)},se=()=>{setTimeout(()=>{k.value=!1,T.success("导入客户成功"),C()},500)},de=()=>{setTimeout(()=>{T.success("导出客户成功")},500)};return be(()=>{C()}),(u,t)=>{const _=s("el-icon"),p=s("el-button"),g=s("el-input"),m=s("el-form-item"),i=s("el-col"),y=s("el-option"),S=s("el-select"),L=s("el-row"),O=s("el-form"),n=s("el-table-column"),R=s("el-tag"),re=s("el-switch"),$=s("el-table"),ie=s("el-pagination"),pe=s("el-card"),B=s("el-dialog"),v=s("el-descriptions-item"),me=s("el-descriptions"),fe=s("el-upload"),ce=ge("loading");return A(),ve("div",Me,[e(pe,null,{header:l(()=>[d("div",Fe,[t[24]||(t[24]=d("span",null,"客户管理",-1)),d("div",Ee,[e(p,{type:"primary",onClick:X},{default:l(()=>[e(_,null,{default:l(()=>[e(V(we))]),_:1}),t[21]||(t[21]=d("span",null,"新增客户",-1))]),_:1}),e(p,{onClick:ue},{default:l(()=>[e(_,null,{default:l(()=>[e(V(P))]),_:1}),t[22]||(t[22]=d("span",null,"导入",-1))]),_:1}),e(p,{onClick:de},{default:l(()=>[e(_,null,{default:l(()=>[e(V(ye))]),_:1}),t[23]||(t[23]=d("span",null,"导出",-1))]),_:1})])])]),default:l(()=>[e(O,{model:b,class:"search-form","label-width":"80px"},{default:l(()=>[e(L,{gutter:20},{default:l(()=>[e(i,{span:6},{default:l(()=>[e(m,{label:"客户名称"},{default:l(()=>[e(g,{modelValue:b.customerName,"onUpdate:modelValue":t[0]||(t[0]=a=>b.customerName=a),placeholder:"请输入客户名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:l(()=>[e(m,{label:"联系人"},{default:l(()=>[e(g,{modelValue:b.contactName,"onUpdate:modelValue":t[1]||(t[1]=a=>b.contactName=a),placeholder:"请输入联系人",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:l(()=>[e(m,{label:"电话"},{default:l(()=>[e(g,{modelValue:b.phone,"onUpdate:modelValue":t[2]||(t[2]=a=>b.phone=a),placeholder:"请输入电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:6},{default:l(()=>[e(m,{label:"客户分类"},{default:l(()=>[e(S,{modelValue:b.customerType,"onUpdate:modelValue":t[3]||(t[3]=a=>b.customerType=a),placeholder:"请选择客户分类",clearable:""},{default:l(()=>[e(y,{label:"潜在客户",value:"0"}),e(y,{label:"意向客户",value:"1"}),e(y,{label:"合作客户",value:"2"}),e(y,{label:"流失客户",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:24,class:"search-buttons"},{default:l(()=>[e(p,{type:"primary",onClick:Q},{default:l(()=>[e(_,null,{default:l(()=>[e(V(Ve))]),_:1}),t[25]||(t[25]=d("span",null,"查询",-1))]),_:1}),e(p,{onClick:G},{default:l(()=>[e(_,null,{default:l(()=>[e(V(he))]),_:1}),t[26]||(t[26]=d("span",null,"重置",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),Ce((A(),Te($,{data:D.value,style:{width:"100%"},border:"",onRowClick:le},{default:l(()=>[e(n,{prop:"id",label:"客户ID",width:"80"}),e(n,{prop:"customerName",label:"客户名称",width:"180"}),e(n,{prop:"contactName",label:"联系人",width:"120"}),e(n,{prop:"phone",label:"电话",width:"150"}),e(n,{prop:"email",label:"邮箱",width:"180"}),e(n,{prop:"customerType",label:"客户分类",width:"120"},{default:l(a=>[e(R,{type:z[a.row.customerType].type,effect:z[a.row.customerType].effect},{default:l(()=>[r(f(z[a.row.customerType].label),1)]),_:2},1032,["type","effect"])]),_:1}),e(n,{prop:"status",label:"状态",width:"100"},{default:l(a=>[e(re,{modelValue:a.row.status,"onUpdate:modelValue":N=>a.row.status=N,"active-value":"1","inactive-value":"0",onChange:N=>te(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(n,{prop:"createTime",label:"创建时间",width:"180"}),e(n,{label:"操作",width:"250",fixed:"right"},{default:l(a=>[e(p,{type:"primary",size:"small",onClick:N=>Y(a.row)},{default:l(()=>[e(_,null,{default:l(()=>[e(V(xe))]),_:1}),t[27]||(t[27]=d("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(p,{type:"success",size:"small",onClick:N=>ee(a.row)},{default:l(()=>[e(_,null,{default:l(()=>[e(V(Ne))]),_:1}),t[28]||(t[28]=d("span",null,"详情",-1))]),_:1},8,["onClick"]),e(p,{type:"warning",size:"small",onClick:N=>ae(a.row)},{default:l(()=>[e(_,null,{default:l(()=>[e(V(ke))]),_:1}),t[29]||(t[29]=d("span",null,"跟进",-1))]),_:1},8,["onClick"]),e(p,{type:"danger",size:"small",onClick:N=>oe(a.row.id)},{default:l(()=>[e(_,null,{default:l(()=>[e(V(Ue))]),_:1}),t[30]||(t[30]=d("span",null,"删除",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ce,U.value]]),d("div",Se,[e(ie,{"current-page":w.current,"onUpdate:currentPage":t[4]||(t[4]=a=>w.current=a),"page-size":w.size,"onUpdate:pageSize":t[5]||(t[5]=a=>w.size=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:H,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),e(B,{modelValue:x.value,"onUpdate:modelValue":t[17]||(t[17]=a=>x.value=a),title:M.value==="add"?"新增客户":"编辑客户",width:"700px"},{footer:l(()=>[d("span",Re,[e(p,{onClick:t[16]||(t[16]=a=>x.value=!1)},{default:l(()=>[...t[31]||(t[31]=[r("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:Z},{default:l(()=>[...t[32]||(t[32]=[r("确定",-1)])]),_:1})])]),default:l(()=>[e(O,{model:o,rules:K,ref_key:"customerFormRef",ref:E,"label-width":"100px"},{default:l(()=>[e(L,{gutter:20},{default:l(()=>[e(i,{span:12},{default:l(()=>[e(m,{prop:"customerName"},{default:l(()=>[e(g,{modelValue:o.customerName,"onUpdate:modelValue":t[6]||(t[6]=a=>o.customerName=a),placeholder:"请输入客户名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"customerType"},{default:l(()=>[e(S,{modelValue:o.customerType,"onUpdate:modelValue":t[7]||(t[7]=a=>o.customerType=a),placeholder:"请选择客户分类"},{default:l(()=>[e(y,{label:"潜在客户",value:"0"}),e(y,{label:"意向客户",value:"1"}),e(y,{label:"合作客户",value:"2"}),e(y,{label:"流失客户",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"contactName"},{default:l(()=>[e(g,{modelValue:o.contactName,"onUpdate:modelValue":t[8]||(t[8]=a=>o.contactName=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"phone"},{default:l(()=>[e(g,{modelValue:o.phone,"onUpdate:modelValue":t[9]||(t[9]=a=>o.phone=a),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"email"},{default:l(()=>[e(g,{modelValue:o.email,"onUpdate:modelValue":t[10]||(t[10]=a=>o.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"address"},{default:l(()=>[e(g,{modelValue:o.address,"onUpdate:modelValue":t[11]||(t[11]=a=>o.address=a),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"industry"},{default:l(()=>[e(g,{modelValue:o.industry,"onUpdate:modelValue":t[12]||(t[12]=a=>o.industry=a),placeholder:"请输入所属行业"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"source"},{default:l(()=>[e(g,{modelValue:o.source,"onUpdate:modelValue":t[13]||(t[13]=a=>o.source=a),placeholder:"请输入客户来源"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:24},{default:l(()=>[e(m,{prop:"description"},{default:l(()=>[e(g,{modelValue:o.description,"onUpdate:modelValue":t[14]||(t[14]=a=>o.description=a),type:"textarea",placeholder:"请输入客户描述"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(m,{prop:"status"},{default:l(()=>[e(S,{modelValue:o.status,"onUpdate:modelValue":t[15]||(t[15]=a=>o.status=a),placeholder:"请选择状态"},{default:l(()=>[e(y,{label:"启用",value:"1"}),e(y,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(B,{modelValue:F.value,"onUpdate:modelValue":t[18]||(t[18]=a=>F.value=a),title:"客户详情",width:"800px"},{default:l(()=>[e(me,{column:2,border:""},{default:l(()=>[e(v,{label:"客户名称"},{default:l(()=>[r(f(c.value.customerName),1)]),_:1}),e(v,{label:"客户分类"},{default:l(()=>{var a;return[r(f((a=z[c.value.customerType])==null?void 0:a.label),1)]}),_:1}),e(v,{label:"联系人"},{default:l(()=>[r(f(c.value.contactName),1)]),_:1}),e(v,{label:"电话"},{default:l(()=>[r(f(c.value.phone),1)]),_:1}),e(v,{label:"邮箱"},{default:l(()=>[r(f(c.value.email),1)]),_:1}),e(v,{label:"地址"},{default:l(()=>[r(f(c.value.address),1)]),_:1}),e(v,{label:"所属行业"},{default:l(()=>[r(f(c.value.industry),1)]),_:1}),e(v,{label:"客户来源"},{default:l(()=>[r(f(c.value.source),1)]),_:1}),e(v,{label:"创建时间"},{default:l(()=>[r(f(c.value.createTime),1)]),_:1}),e(v,{label:"状态"},{default:l(()=>[r(f(c.value.status==="1"?"启用":"禁用"),1)]),_:1}),e(v,{label:"客户描述",span:2},{default:l(()=>[r(f(c.value.description),1)]),_:1})]),_:1}),t[33]||(t[33]=d("h3",{style:{"margin-top":"20px"}},"联系人",-1)),e($,{data:j.value,style:{width:"100%"},border:""},{default:l(()=>[e(n,{prop:"name",label:"姓名",width:"120"}),e(n,{prop:"phone",label:"电话",width:"150"}),e(n,{prop:"email",label:"邮箱",width:"180"}),e(n,{prop:"position",label:"职位",width:"120"}),e(n,{prop:"priority",label:"优先级",width:"100"},{default:l(a=>[e(R,{type:a.row.priority==="1"?"danger":"info"},{default:l(()=>[r(f(a.row.priority==="1"?"高":"普通"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"]),t[34]||(t[34]=d("h3",{style:{"margin-top":"20px"}},"跟进记录",-1)),e($,{data:I.value,style:{width:"100%"},border:""},{default:l(()=>[e(n,{prop:"followContent",label:"跟进内容"}),e(n,{prop:"followMethod",label:"跟进方式",width:"120"},{default:l(a=>[e(R,null,{default:l(()=>[r(f(J[a.row.followMethod]),1)]),_:2},1024)]),_:1}),e(n,{prop:"followTime",label:"跟进时间",width:"180"}),e(n,{prop:"nextFollowTime",label:"下次跟进",width:"180"}),e(n,{prop:"followUser",label:"跟进人",width:"120"})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(B,{modelValue:k.value,"onUpdate:modelValue":t[20]||(t[20]=a=>k.value=a),title:"导入客户",width:"500px"},{footer:l(()=>[d("span",$e,[e(p,{onClick:t[19]||(t[19]=a=>k.value=!1)},{default:l(()=>[...t[37]||(t[37]=[r("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:se},{default:l(()=>[...t[38]||(t[38]=[r("导入",-1)])]),_:1})])]),default:l(()=>[e(fe,{class:"upload-demo",action:"","auto-upload":!1,"on-change":ne,"show-file-list":!0,accept:".xlsx,.xls",limit:1},{tip:l(()=>[...t[36]||(t[36]=[d("div",{class:"el-upload__tip"}," 请选择Excel文件进行导入，支持.xlsx和.xls格式 ",-1)])]),default:l(()=>[e(p,{type:"primary"},{default:l(()=>[e(_,null,{default:l(()=>[e(V(P))]),_:1}),t[35]||(t[35]=d("span",null,"选择文件",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},je=_e(Be,[["__scopeId","data-v-9c1e71da"]]);export{je as default};
