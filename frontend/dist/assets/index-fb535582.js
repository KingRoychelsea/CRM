import{a as de,o as re,b as n,D as ue,c as m,e as V,g as e,w as l,f as p,m as N,F as se,G as k,H as h,I,J as me,K as pe,Q as ie,L as fe,t as A,j as T,M as ye,R as _e,i as P,h as b,E as U}from"./index-285e75c9.js";const ce={class:"payment-management"},be={class:"card-header"},ge={class:"pagination"},ve={class:"dialog-footer"},we={__name:"index",setup(Ve){const i=P({paymentNo:"",customerId:"",status:"",ownerId:""}),y=P({current:1,size:10,total:0}),x=b(!1),q=b([]),E=b([{id:1,customerName:"阿里巴巴集团"},{id:2,customerName:"腾讯科技"},{id:3,customerName:"百度在线"},{id:4,customerName:"字节跳动"}]),j=b([{id:1,orderName:"阿里云服务器采购订单"},{id:2,orderName:"腾讯云存储服务订单"},{id:3,orderName:"百度推广服务订单"},{id:4,orderName:"字节跳动广告投放订单"}]),F=b([{id:1,name:"管理员"},{id:2,name:"销售1"},{id:3,name:"销售2"}]),R={0:"银行转账",1:"支付宝",2:"微信支付",3:"现金"},D={0:{label:"待回款",type:"warning",effect:"dark"},1:{label:"已回款",type:"success",effect:"dark"},2:{label:"部分回款",type:"info",effect:"dark"}},g=b(!1),C=b("add"),z=b(null),o=P({id:"",paymentNo:"",customerId:"",orderId:"",paymentAmount:0,paymentDate:"",paymentMethod:"0",status:"0",ownerId:"",remark:""}),B={paymentNo:[{required:!0,message:"请输入回款编号",trigger:"blur"},{min:2,max:50,message:"回款编号长度在 2 到 50 个字符",trigger:"blur"}],customerId:[{required:!0,message:"请选择客户",trigger:"blur"}],orderId:[{required:!0,message:"请选择关联订单",trigger:"blur"}],paymentAmount:[{required:!0,message:"请输入回款金额",trigger:"blur"},{type:"number",min:0,message:"回款金额必须大于等于0",trigger:"blur"}],paymentDate:[{required:!0,message:"请选择回款日期",trigger:"blur"}],paymentMethod:[{required:!0,message:"请选择回款方式",trigger:"blur"}],status:[{required:!0,message:"请选择回款状态",trigger:"blur"}],ownerId:[{required:!0,message:"请选择负责人",trigger:"blur"}]},v=async()=>{x.value=!0;try{setTimeout(()=>{q.value=[{id:1,paymentNo:"PY2023001",customerId:1,customerName:"阿里巴巴集团",orderId:1,orderName:"阿里云服务器采购订单",paymentAmount:1e6,paymentDate:"2023-01-05",paymentMethod:"0",status:"1",ownerId:1,ownerName:"管理员",createTime:"2023-01-05 10:00:00"},{id:2,paymentNo:"PY2023002",customerId:2,customerName:"腾讯科技",orderId:2,orderName:"腾讯云存储服务订单",paymentAmount:25e4,paymentDate:"2023-01-06",paymentMethod:"1",status:"2",ownerId:2,ownerName:"销售1",createTime:"2023-01-06 10:00:00"},{id:3,paymentNo:"PY2023003",customerId:3,customerName:"百度在线",orderId:3,orderName:"百度推广服务订单",paymentAmount:3e5,paymentDate:"2023-01-07",paymentMethod:"2",status:"1",ownerId:3,ownerName:"销售2",createTime:"2023-01-07 10:00:00"},{id:4,paymentNo:"PY2023004",customerId:4,customerName:"字节跳动",orderId:4,orderName:"字节跳动广告投放订单",paymentAmount:1e6,paymentDate:"2023-01-08",paymentMethod:"0",status:"0",ownerId:1,ownerName:"管理员",createTime:"2023-01-08 10:00:00"}],y.total=4,x.value=!1},500)}catch(d){console.error("获取回款列表失败:",d),U.error("获取回款列表失败"),x.value=!1}},L=()=>{y.current=1,v()},Y=()=>{Object.keys(i).forEach(d=>{i[d]=""}),y.current=1,v()},$=d=>{y.size=d,v()},G=d=>{y.current=d,v()},H=()=>{C.value="add",Object.keys(o).forEach(d=>{o[d]=""}),o.paymentMethod="0",o.status="0",o.paymentAmount=0,g.value=!0},J=d=>{C.value="edit",Object.assign(o,d),g.value=!0},K=async()=>{if(z.value)try{await z.value.validate(),setTimeout(()=>{g.value=!1,U.success(C.value==="add"?"新增回款成功":"编辑回款成功"),v()},500)}catch(d){console.error("表单验证失败:",d)}},Q=d=>{U.info("查看回款详情功能开发中")},W=()=>{setTimeout(()=>{U.success("导出回款成功")},500)};return re(()=>{v()}),(d,a)=>{const w=n("el-icon"),_=n("el-button"),M=n("el-input"),s=n("el-form-item"),u=n("el-col"),r=n("el-option"),c=n("el-select"),O=n("el-row"),S=n("el-form"),f=n("el-table-column"),X=n("el-tag"),Z=n("el-table"),ee=n("el-pagination"),te=n("el-card"),le=n("el-date-picker"),ae=n("el-dialog"),oe=ue("loading");return m(),V("div",ce,[e(te,null,{header:l(()=>[p("div",be,[a[18]||(a[18]=p("span",null,"回款管理",-1)),e(_,{type:"primary",onClick:H},{default:l(()=>[e(w,null,{default:l(()=>[e(N(se))]),_:1}),a[17]||(a[17]=p("span",null,"新增回款",-1))]),_:1})])]),default:l(()=>[e(S,{model:i,class:"search-form","label-width":"80px"},{default:l(()=>[e(O,{gutter:20},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(s,{label:"回款编号"},{default:l(()=>[e(M,{modelValue:i.paymentNo,"onUpdate:modelValue":a[0]||(a[0]=t=>i.paymentNo=t),placeholder:"请输入回款编号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[e(s,{label:"客户名称"},{default:l(()=>[e(c,{modelValue:i.customerId,"onUpdate:modelValue":a[1]||(a[1]=t=>i.customerId=t),placeholder:"请选择客户",clearable:""},{default:l(()=>[(m(!0),V(k,null,h(E.value,t=>(m(),I(r,{key:t.id,label:t.customerName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[e(s,{label:"回款状态"},{default:l(()=>[e(c,{modelValue:i.status,"onUpdate:modelValue":a[2]||(a[2]=t=>i.status=t),placeholder:"请选择回款状态",clearable:""},{default:l(()=>[e(r,{label:"待回款",value:"0"}),e(r,{label:"已回款",value:"1"}),e(r,{label:"部分回款",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[e(s,{label:"负责人"},{default:l(()=>[e(c,{modelValue:i.ownerId,"onUpdate:modelValue":a[3]||(a[3]=t=>i.ownerId=t),placeholder:"请选择负责人",clearable:""},{default:l(()=>[(m(!0),V(k,null,h(F.value,t=>(m(),I(r,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24,class:"search-buttons"},{default:l(()=>[e(_,{type:"primary",onClick:L},{default:l(()=>[e(w,null,{default:l(()=>[e(N(me))]),_:1}),a[19]||(a[19]=p("span",null,"查询",-1))]),_:1}),e(_,{onClick:Y},{default:l(()=>[e(w,null,{default:l(()=>[e(N(pe))]),_:1}),a[20]||(a[20]=p("span",null,"重置",-1))]),_:1}),e(_,{type:"success",onClick:W},{default:l(()=>[e(w,null,{default:l(()=>[e(N(ie))]),_:1}),a[21]||(a[21]=p("span",null,"导出回款",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),fe((m(),I(Z,{data:q.value,style:{width:"100%"},border:""},{default:l(()=>[e(f,{prop:"id",label:"回款ID",width:"80"}),e(f,{prop:"paymentNo",label:"回款编号",width:"150"}),e(f,{prop:"customerName",label:"客户名称",width:"150"}),e(f,{prop:"orderName",label:"关联订单",width:"150"}),e(f,{prop:"paymentAmount",label:"回款金额",width:"120"},{default:l(t=>[p("span",null,"¥"+A(t.row.paymentAmount.toFixed(2)),1)]),_:1}),e(f,{prop:"paymentDate",label:"回款日期",width:"150"}),e(f,{prop:"paymentMethod",label:"回款方式",width:"120"},{default:l(t=>[p("span",null,A(R[t.row.paymentMethod]),1)]),_:1}),e(f,{prop:"status",label:"状态",width:"100"},{default:l(t=>[e(X,{type:D[t.row.status].type,effect:D[t.row.status].effect},{default:l(()=>[T(A(D[t.row.status].label),1)]),_:2},1032,["type","effect"])]),_:1}),e(f,{prop:"ownerName",label:"负责人",width:"100"}),e(f,{prop:"createTime",label:"创建时间",width:"180"}),e(f,{label:"操作",width:"200",fixed:"right"},{default:l(t=>[e(_,{type:"primary",size:"small",onClick:ne=>J(t.row)},{default:l(()=>[e(w,null,{default:l(()=>[e(N(ye))]),_:1}),a[22]||(a[22]=p("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(_,{type:"success",size:"small",onClick:ne=>Q(t.row)},{default:l(()=>[e(w,null,{default:l(()=>[e(N(_e))]),_:1}),a[23]||(a[23]=p("span",null,"详情",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,x.value]]),p("div",ge,[e(ee,{"current-page":y.current,"onUpdate:currentPage":a[4]||(a[4]=t=>y.current=t),"page-size":y.size,"onUpdate:pageSize":a[5]||(a[5]=t=>y.size=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:y.total,onSizeChange:$,onCurrentChange:G},null,8,["current-page","page-size","total"])])]),_:1}),e(ae,{modelValue:g.value,"onUpdate:modelValue":a[16]||(a[16]=t=>g.value=t),title:C.value==="add"?"新增回款":"编辑回款",width:"700px"},{footer:l(()=>[p("span",ve,[e(_,{onClick:a[15]||(a[15]=t=>g.value=!1)},{default:l(()=>[...a[24]||(a[24]=[T("取消",-1)])]),_:1}),e(_,{type:"primary",onClick:K},{default:l(()=>[...a[25]||(a[25]=[T("确定",-1)])]),_:1})])]),default:l(()=>[e(S,{model:o,rules:B,ref_key:"paymentFormRef",ref:z,"label-width":"100px"},{default:l(()=>[e(O,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(s,{prop:"paymentNo"},{default:l(()=>[e(M,{modelValue:o.paymentNo,"onUpdate:modelValue":a[6]||(a[6]=t=>o.paymentNo=t),placeholder:"请输入回款编号"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"customerId"},{default:l(()=>[e(c,{modelValue:o.customerId,"onUpdate:modelValue":a[7]||(a[7]=t=>o.customerId=t),placeholder:"请选择客户"},{default:l(()=>[(m(!0),V(k,null,h(E.value,t=>(m(),I(r,{key:t.id,label:t.customerName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"orderId"},{default:l(()=>[e(c,{modelValue:o.orderId,"onUpdate:modelValue":a[8]||(a[8]=t=>o.orderId=t),placeholder:"请选择关联订单"},{default:l(()=>[(m(!0),V(k,null,h(j.value,t=>(m(),I(r,{key:t.id,label:t.orderName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"paymentAmount"},{default:l(()=>[e(M,{modelValue:o.paymentAmount,"onUpdate:modelValue":a[9]||(a[9]=t=>o.paymentAmount=t),type:"number",placeholder:"请输入回款金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"paymentDate"},{default:l(()=>[e(le,{modelValue:o.paymentDate,"onUpdate:modelValue":a[10]||(a[10]=t=>o.paymentDate=t),type:"date",placeholder:"请选择回款日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"paymentMethod"},{default:l(()=>[e(c,{modelValue:o.paymentMethod,"onUpdate:modelValue":a[11]||(a[11]=t=>o.paymentMethod=t),placeholder:"请选择回款方式"},{default:l(()=>[e(r,{label:"银行转账",value:"0"}),e(r,{label:"支付宝",value:"1"}),e(r,{label:"微信支付",value:"2"}),e(r,{label:"现金",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"status"},{default:l(()=>[e(c,{modelValue:o.status,"onUpdate:modelValue":a[12]||(a[12]=t=>o.status=t),placeholder:"请选择回款状态"},{default:l(()=>[e(r,{label:"待回款",value:"0"}),e(r,{label:"已回款",value:"1"}),e(r,{label:"部分回款",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{prop:"ownerId"},{default:l(()=>[e(c,{modelValue:o.ownerId,"onUpdate:modelValue":a[13]||(a[13]=t=>o.ownerId=t),placeholder:"请选择负责人"},{default:l(()=>[(m(!0),V(k,null,h(F.value,t=>(m(),I(r,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(s,{prop:"remark"},{default:l(()=>[e(M,{modelValue:o.remark,"onUpdate:modelValue":a[14]||(a[14]=t=>o.remark=t),type:"textarea",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ie=de(we,[["__scopeId","data-v-a4de16d5"]]);export{Ie as default};
