import{a as ge,o as ve,b as s,D as ye,c as f,e as C,g as e,w as l,f as m,m as w,F as Ve,G as S,H as F,I as x,J as we,K as Ne,Q as ke,L as Ie,t as K,j as I,M as Ue,R as Ce,T as xe,U as De,i as T,h as c,E as D}from"./index-285e75c9.js";const ze={class:"order-management"},Oe={class:"card-header"},Se={class:"pagination"},Fe={class:"dialog-footer"},Te={class:"dialog-footer"},qe={class:"dialog-footer"},Re={__name:"index",setup(Me){const b=T({orderNo:"",customerId:"",status:"",ownerId:""}),_=T({current:1,size:10,total:0}),q=c(!1),h=c([]),G=c([{id:1,customerName:"阿里巴巴集团"},{id:2,customerName:"腾讯科技"},{id:3,customerName:"百度在线"},{id:4,customerName:"字节跳动"}]),Q=c([{id:1,contractName:"阿里云服务器采购合同"},{id:2,contractName:"腾讯云存储服务合同"},{id:3,contractName:"百度推广服务合同"},{id:4,contractName:"字节跳动广告投放合同"}]),H=c([{id:1,name:"管理员"},{id:2,name:"销售1"},{id:3,name:"销售2"}]),A={0:{label:"待付款",type:"warning",effect:"dark"},1:{label:"已付款",type:"success",effect:"dark"},2:{label:"待发货",type:"info",effect:"dark"},3:{label:"已完成",type:"primary",effect:"dark"},4:{label:"已取消",type:"danger",effect:"dark"}},U=c(!1),z=c(!1),O=c(!1),R=c("add"),E=c(null),$=c(null),j=c(null),o=T({id:"",orderNo:"",orderName:"",customerId:"",contractId:"",amount:0,orderDate:"",ownerId:"",status:"0",description:""}),N=T({status:"",remark:""}),i=T({paymentAmount:0,paymentDate:"",paymentMethod:"0",remark:""}),W={orderNo:[{required:!0,message:"请输入订单编号",trigger:"blur"},{min:2,max:50,message:"订单编号长度在 2 到 50 个字符",trigger:"blur"}],orderName:[{required:!0,message:"请输入订单名称",trigger:"blur"},{min:2,max:100,message:"订单名称长度在 2 到 100 个字符",trigger:"blur"}],customerId:[{required:!0,message:"请选择客户",trigger:"blur"}],contractId:[{required:!0,message:"请选择关联合同",trigger:"blur"}],amount:[{required:!0,message:"请输入订单金额",trigger:"blur"},{type:"number",min:0,message:"订单金额必须大于等于0",trigger:"blur"}],orderDate:[{required:!0,message:"请选择订单日期",trigger:"blur"}],ownerId:[{required:!0,message:"请选择负责人",trigger:"blur"}],status:[{required:!0,message:"请选择订单状态",trigger:"blur"}]},X={status:[{required:!0,message:"请选择订单状态",trigger:"blur"}]},Y={paymentAmount:[{required:!0,message:"请输入回款金额",trigger:"blur"},{type:"number",min:0,message:"回款金额必须大于等于0",trigger:"blur"}],paymentDate:[{required:!0,message:"请选择回款日期",trigger:"blur"}],paymentMethod:[{required:!0,message:"请选择回款方式",trigger:"blur"}]},k=async()=>{q.value=!0;try{setTimeout(()=>{h.value=[{id:1,orderNo:"OD2023001",orderName:"阿里云服务器采购订单",customerId:1,customerName:"阿里巴巴集团",contractId:1,contractName:"阿里云服务器采购合同",amount:1e6,status:"1",ownerId:1,ownerName:"管理员",createTime:"2023-01-01 10:00:00"},{id:2,orderNo:"OD2023002",orderName:"腾讯云存储服务订单",customerId:2,customerName:"腾讯科技",contractId:2,contractName:"腾讯云存储服务合同",amount:5e5,status:"0",ownerId:2,ownerName:"销售1",createTime:"2023-01-02 10:00:00"},{id:3,orderNo:"OD2023003",orderName:"百度推广服务订单",customerId:3,customerName:"百度在线",contractId:3,contractName:"百度推广服务合同",amount:3e5,status:"2",ownerId:3,ownerName:"销售2",createTime:"2023-01-03 10:00:00"},{id:4,orderNo:"OD2023004",orderName:"字节跳动广告投放订单",customerId:4,customerName:"字节跳动",contractId:4,contractName:"字节跳动广告投放合同",amount:2e6,status:"3",ownerId:1,ownerName:"管理员",createTime:"2023-01-04 10:00:00"}],_.total=4,q.value=!1},500)}catch(u){console.error("获取订单列表失败:",u),D.error("获取订单列表失败"),q.value=!1}},Z=()=>{_.current=1,k()},ee=()=>{Object.keys(b).forEach(u=>{b[u]=""}),_.current=1,k()},le=u=>{_.size=u,k()},te=u=>{_.current=u,k()},ae=()=>{R.value="add",Object.keys(o).forEach(u=>{o[u]=""}),o.status="0",o.amount=0,U.value=!0},oe=u=>{R.value="edit",Object.assign(o,u),U.value=!0},re=async()=>{if(E.value)try{await E.value.validate(),setTimeout(()=>{U.value=!1,D.success(R.value==="add"?"新增订单成功":"编辑订单成功"),k()},500)}catch(u){console.error("表单验证失败:",u)}},ue=u=>{D.info("查看订单详情功能开发中")},de=u=>{N.status=u.status,N.remark="",z.value=!0},ne=async()=>{if($.value)try{await $.value.validate(),setTimeout(()=>{z.value=!1,D.success("更新订单状态成功"),k()},500)}catch(u){console.error("表单验证失败:",u)}},se=u=>{Object.keys(i).forEach(t=>{i[t]=""}),i.paymentAmount=0,i.paymentMethod="0",O.value=!0},me=async()=>{if(j.value)try{await j.value.validate(),setTimeout(()=>{O.value=!1,D.success("新增回款记录成功")},500)}catch(u){console.error("表单验证失败:",u)}},pe=()=>{setTimeout(()=>{D.success("导出订单成功")},500)};return ve(()=>{k()}),(u,t)=>{const y=s("el-icon"),p=s("el-button"),V=s("el-input"),d=s("el-form-item"),n=s("el-col"),r=s("el-option"),v=s("el-select"),B=s("el-row"),M=s("el-form"),g=s("el-table-column"),ie=s("el-tag"),fe=s("el-table"),ce=s("el-pagination"),be=s("el-card"),J=s("el-date-picker"),L=s("el-dialog"),_e=ye("loading");return f(),C("div",ze,[e(be,null,{header:l(()=>[m("div",Oe,[t[28]||(t[28]=m("span",null,"订单管理",-1)),e(p,{type:"primary",onClick:ae},{default:l(()=>[e(y,null,{default:l(()=>[e(w(Ve))]),_:1}),t[27]||(t[27]=m("span",null,"新增订单",-1))]),_:1})])]),default:l(()=>[e(M,{model:b,class:"search-form","label-width":"80px"},{default:l(()=>[e(B,{gutter:20},{default:l(()=>[e(n,{span:6},{default:l(()=>[e(d,{label:"订单编号"},{default:l(()=>[e(V,{modelValue:b.orderNo,"onUpdate:modelValue":t[0]||(t[0]=a=>b.orderNo=a),placeholder:"请输入订单编号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:6},{default:l(()=>[e(d,{label:"客户名称"},{default:l(()=>[e(v,{modelValue:b.customerId,"onUpdate:modelValue":t[1]||(t[1]=a=>b.customerId=a),placeholder:"请选择客户",clearable:""},{default:l(()=>[(f(!0),C(S,null,F(G.value,a=>(f(),x(r,{key:a.id,label:a.customerName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:6},{default:l(()=>[e(d,{label:"订单状态"},{default:l(()=>[e(v,{modelValue:b.status,"onUpdate:modelValue":t[2]||(t[2]=a=>b.status=a),placeholder:"请选择订单状态",clearable:""},{default:l(()=>[e(r,{label:"待付款",value:"0"}),e(r,{label:"已付款",value:"1"}),e(r,{label:"待发货",value:"2"}),e(r,{label:"已完成",value:"3"}),e(r,{label:"已取消",value:"4"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:6},{default:l(()=>[e(d,{label:"负责人"},{default:l(()=>[e(v,{modelValue:b.ownerId,"onUpdate:modelValue":t[3]||(t[3]=a=>b.ownerId=a),placeholder:"请选择负责人",clearable:""},{default:l(()=>[(f(!0),C(S,null,F(H.value,a=>(f(),x(r,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24,class:"search-buttons"},{default:l(()=>[e(p,{type:"primary",onClick:Z},{default:l(()=>[e(y,null,{default:l(()=>[e(w(we))]),_:1}),t[29]||(t[29]=m("span",null,"查询",-1))]),_:1}),e(p,{onClick:ee},{default:l(()=>[e(y,null,{default:l(()=>[e(w(Ne))]),_:1}),t[30]||(t[30]=m("span",null,"重置",-1))]),_:1}),e(p,{type:"success",onClick:pe},{default:l(()=>[e(y,null,{default:l(()=>[e(w(ke))]),_:1}),t[31]||(t[31]=m("span",null,"导出订单",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),Ie((f(),x(fe,{data:h.value,style:{width:"100%"},border:""},{default:l(()=>[e(g,{prop:"id",label:"订单ID",width:"80"}),e(g,{prop:"orderNo",label:"订单编号",width:"150"}),e(g,{prop:"orderName",label:"订单名称",width:"200"}),e(g,{prop:"customerName",label:"客户名称",width:"150"}),e(g,{prop:"contractName",label:"关联合同",width:"150"}),e(g,{prop:"amount",label:"订单金额",width:"120"},{default:l(a=>[m("span",null,"¥"+K(a.row.amount.toFixed(2)),1)]),_:1}),e(g,{prop:"status",label:"状态",width:"100"},{default:l(a=>[e(ie,{type:A[a.row.status].type,effect:A[a.row.status].effect},{default:l(()=>[I(K(A[a.row.status].label),1)]),_:2},1032,["type","effect"])]),_:1}),e(g,{prop:"ownerName",label:"负责人",width:"100"}),e(g,{prop:"createTime",label:"创建时间",width:"180"}),e(g,{label:"操作",width:"300",fixed:"right"},{default:l(a=>[e(p,{type:"primary",size:"small",onClick:P=>oe(a.row)},{default:l(()=>[e(y,null,{default:l(()=>[e(w(Ue))]),_:1}),t[32]||(t[32]=m("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(p,{type:"success",size:"small",onClick:P=>ue(a.row)},{default:l(()=>[e(y,null,{default:l(()=>[e(w(Ce))]),_:1}),t[33]||(t[33]=m("span",null,"详情",-1))]),_:1},8,["onClick"]),e(p,{type:"warning",size:"small",onClick:P=>de(a.row)},{default:l(()=>[e(y,null,{default:l(()=>[e(w(xe))]),_:1}),t[34]||(t[34]=m("span",null,"更新状态",-1))]),_:1},8,["onClick"]),e(p,{type:"info",size:"small",onClick:P=>se(a.row)},{default:l(()=>[e(y,null,{default:l(()=>[e(w(De))]),_:1}),t[35]||(t[35]=m("span",null,"回款",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[_e,q.value]]),m("div",Se,[e(ce,{"current-page":_.current,"onUpdate:currentPage":t[4]||(t[4]=a=>_.current=a),"page-size":_.size,"onUpdate:pageSize":t[5]||(t[5]=a=>_.size=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:_.total,onSizeChange:le,onCurrentChange:te},null,8,["current-page","page-size","total"])])]),_:1}),e(L,{modelValue:U.value,"onUpdate:modelValue":t[16]||(t[16]=a=>U.value=a),title:R.value==="add"?"新增订单":"编辑订单",width:"700px"},{footer:l(()=>[m("span",Fe,[e(p,{onClick:t[15]||(t[15]=a=>U.value=!1)},{default:l(()=>[...t[36]||(t[36]=[I("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:re},{default:l(()=>[...t[37]||(t[37]=[I("确定",-1)])]),_:1})])]),default:l(()=>[e(M,{model:o,rules:W,ref_key:"orderFormRef",ref:E,"label-width":"100px"},{default:l(()=>[e(B,{gutter:20},{default:l(()=>[e(n,{span:12},{default:l(()=>[e(d,{prop:"orderNo"},{default:l(()=>[e(V,{modelValue:o.orderNo,"onUpdate:modelValue":t[6]||(t[6]=a=>o.orderNo=a),placeholder:"请输入订单编号"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"orderName"},{default:l(()=>[e(V,{modelValue:o.orderName,"onUpdate:modelValue":t[7]||(t[7]=a=>o.orderName=a),placeholder:"请输入订单名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"customerId"},{default:l(()=>[e(v,{modelValue:o.customerId,"onUpdate:modelValue":t[8]||(t[8]=a=>o.customerId=a),placeholder:"请选择客户"},{default:l(()=>[(f(!0),C(S,null,F(G.value,a=>(f(),x(r,{key:a.id,label:a.customerName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"contractId"},{default:l(()=>[e(v,{modelValue:o.contractId,"onUpdate:modelValue":t[9]||(t[9]=a=>o.contractId=a),placeholder:"请选择关联合同"},{default:l(()=>[(f(!0),C(S,null,F(Q.value,a=>(f(),x(r,{key:a.id,label:a.contractName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"amount"},{default:l(()=>[e(V,{modelValue:o.amount,"onUpdate:modelValue":t[10]||(t[10]=a=>o.amount=a),type:"number",placeholder:"请输入订单金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"orderDate"},{default:l(()=>[e(J,{modelValue:o.orderDate,"onUpdate:modelValue":t[11]||(t[11]=a=>o.orderDate=a),type:"date",placeholder:"请选择订单日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"ownerId"},{default:l(()=>[e(v,{modelValue:o.ownerId,"onUpdate:modelValue":t[12]||(t[12]=a=>o.ownerId=a),placeholder:"请选择负责人"},{default:l(()=>[(f(!0),C(S,null,F(H.value,a=>(f(),x(r,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(d,{prop:"status"},{default:l(()=>[e(v,{modelValue:o.status,"onUpdate:modelValue":t[13]||(t[13]=a=>o.status=a),placeholder:"请选择订单状态"},{default:l(()=>[e(r,{label:"待付款",value:"0"}),e(r,{label:"已付款",value:"1"}),e(r,{label:"待发货",value:"2"}),e(r,{label:"已完成",value:"3"}),e(r,{label:"已取消",value:"4"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(d,{prop:"description"},{default:l(()=>[e(V,{modelValue:o.description,"onUpdate:modelValue":t[14]||(t[14]=a=>o.description=a),type:"textarea",placeholder:"请输入订单描述"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(L,{modelValue:z.value,"onUpdate:modelValue":t[20]||(t[20]=a=>z.value=a),title:"更新订单状态",width:"400px"},{footer:l(()=>[m("span",Te,[e(p,{onClick:t[19]||(t[19]=a=>z.value=!1)},{default:l(()=>[...t[38]||(t[38]=[I("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:ne},{default:l(()=>[...t[39]||(t[39]=[I("确定",-1)])]),_:1})])]),default:l(()=>[e(M,{model:N,rules:X,ref_key:"updateStatusFormRef",ref:$},{default:l(()=>[e(d,{label:"订单状态",prop:"status"},{default:l(()=>[e(v,{modelValue:N.status,"onUpdate:modelValue":t[17]||(t[17]=a=>N.status=a),placeholder:"请选择订单状态"},{default:l(()=>[e(r,{label:"待付款",value:"0"}),e(r,{label:"已付款",value:"1"}),e(r,{label:"待发货",value:"2"}),e(r,{label:"已完成",value:"3"}),e(r,{label:"已取消",value:"4"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"备注",prop:"remark"},{default:l(()=>[e(V,{modelValue:N.remark,"onUpdate:modelValue":t[18]||(t[18]=a=>N.remark=a),type:"textarea",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(L,{modelValue:O.value,"onUpdate:modelValue":t[26]||(t[26]=a=>O.value=a),title:"新增回款记录",width:"500px"},{footer:l(()=>[m("span",qe,[e(p,{onClick:t[25]||(t[25]=a=>O.value=!1)},{default:l(()=>[...t[40]||(t[40]=[I("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:me},{default:l(()=>[...t[41]||(t[41]=[I("确定",-1)])]),_:1})])]),default:l(()=>[e(M,{model:i,rules:Y,ref_key:"paymentFormRef",ref:j,"label-width":"100px"},{default:l(()=>[e(B,{gutter:20},{default:l(()=>[e(n,{span:24},{default:l(()=>[e(d,{prop:"paymentAmount"},{default:l(()=>[e(V,{modelValue:i.paymentAmount,"onUpdate:modelValue":t[21]||(t[21]=a=>i.paymentAmount=a),type:"number",placeholder:"请输入回款金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(d,{prop:"paymentDate"},{default:l(()=>[e(J,{modelValue:i.paymentDate,"onUpdate:modelValue":t[22]||(t[22]=a=>i.paymentDate=a),type:"date",placeholder:"请选择回款日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(d,{prop:"paymentMethod"},{default:l(()=>[e(v,{modelValue:i.paymentMethod,"onUpdate:modelValue":t[23]||(t[23]=a=>i.paymentMethod=a),placeholder:"请选择回款方式"},{default:l(()=>[e(r,{label:"银行转账",value:"0"}),e(r,{label:"支付宝",value:"1"}),e(r,{label:"微信支付",value:"2"}),e(r,{label:"现金",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(d,{prop:"remark"},{default:l(()=>[e(V,{modelValue:i.remark,"onUpdate:modelValue":t[24]||(t[24]=a=>i.remark=a),type:"textarea",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ee=ge(Re,[["__scopeId","data-v-e6ba03c1"]]);export{Ee as default};
